# supabase/init

This directory contains the modularized database setup for b4Flite.
Running these files in order ensures a clean and secure database setup.

## Execution Order
1. `00-extensions.sql` - Enables required PostgreSQL extensions.
2. `01-tables.sql` - Creates the core table structure and handles legacy migrations.
3. `02-functions.sql` - Defines security helper functions (`is_admin`, `is_manager`, etc.).
4. `03-triggers.sql` - Sets up audit logging and protection triggers.
5. `04-rls.sql` - Implements granular Row Level Security policies.
6. `05-indexes.sql` - Optimizes performance for RLS and frequent queries.
7. `06-storage.sql` - Configures Storage Buckets and their RLS policies.
8. `07-seed.sql` - Inserts default roles and system data.

---

## Consolidated Script
If you prefer to run everything at once, use the `COMBINED_SETUP.sql` file generated by the developer tools.
